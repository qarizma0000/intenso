<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Intenso TV | Kanal Listesi</title>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<style>
body {
  margin:0;
  background:#000;
  display:flex;
  height:100vh;
  font-family:Arial, Helvetica, sans-serif;
  color:#fff;
}

/* KANAL PANELÄ° */
#channels {
  width:260px;
  background:#111;
  overflow-y:auto;
  border-right:2px solid #222;
}

#channels h3 {
  margin:0;
  padding:10px;
  background:#cc0000;
  text-align:center;
  font-size:14px;
}

.channel {
  padding:8px 10px;
  cursor:pointer;
  border-bottom:1px solid #222;
  font-size:13px;
}

.channel:hover {
  background:#222;
}

/* PLAYER */
#player {
  flex:1;
}

video {
  width:100%;
  height:100%;
  background:#000;
}
</style>
</head>

<body>

<!-- KANAL LÄ°STESÄ° -->
<div id="channels">
  <h3>ðŸ“º Kanal Listesi</h3>
</div>

<!-- PLAYER -->
<div id="player">
  <video id="video" controls autoplay></video>
</div>

<script>
const playlistUrl = "kanallar.m3u"; // GITHUB'A YÃœKLEDÄ°ÄžÄ°N DOSYA

const channelBox = document.getElementById("channels");
const video = document.getElementById("video");
let hls;

fetch(playlistUrl)
  .then(res => res.text())
  .then(data => parseM3U(data));

function parseM3U(data) {
  const lines = data.split("\n");
  let name = "";

  lines.forEach(line => {
    line = line.trim();
    if (line.startsWith("#EXTINF")) {
      name = line.split(",").pop();
    } else if (line.startsWith("http")) {
      addChannel(name, line);
    }
  });
}

function addChannel(name, url) {
  const div = document.createElement("div");
  div.className = "channel";
  div.innerText = name || "Kanal";
  div.onclick = () => play(url);
  channelBox.appendChild(div);
}

function play(url) {
  if (hls) hls.destroy();

  if (Hls.isSupported()) {
    hls = new Hls();
    hls.loadSource(url);
    hls.attachMedia(video);
  } else {
    video.src = url;
  }
}
</script>

</body>
</html>
